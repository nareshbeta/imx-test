var waxjs=function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=3)}([function(n,t,i){"use strict";function s(n){return 0!=(128&n[n.length-1])}function h(n){for(var r,i=1,t=0;t<n.length;++t)r=(255&~n[t])+i,n[t]=r,i=r>>8}function b(n,t){for(var f,e,i,o,r=new Uint8Array(n),u=0;u<t.length;++u){if(f=t.charCodeAt(u),f<"0".charCodeAt(0)||f>"9".charCodeAt(0))throw new Error("invalid number");for(e=f-"0".charCodeAt(0),i=0;i<n;++i)o=10*r[i]+e,r[i]=o,e=o>>8;if(e)throw new Error("number is out of range");}return r}function c(n,t){var i,f,r,u,e;for(void 0===t&&(t=1),i=Array(t).fill("0".charCodeAt(0)),f=n.length-1;f>=0;--f){for(r=n[f],u=0;u<i.length;++u)e=(i[u]-"0".charCodeAt(0)<<8)+r,i[u]="0".charCodeAt(0)+e%10,r=e/10|0;for(;r;)i.push("0".charCodeAt(0)+r%10),r=r/10|0}return i.reverse(),String.fromCharCode.apply(String,a(i))}function l(n,t){for(var r,u,e,i=new Uint8Array(n),f=0;f<t.length;++f){if(r=w[t.charCodeAt(f)],r<0)throw new Error("invalid base-58 value");for(u=0;u<n;++u)e=58*i[u]+r,i[u]=e,r=e>>8;if(r)throw new Error("base-58 value is out of range");}return i.reverse(),i}function k(n,t){var c,p,l,b,i,o,u,r,s,y,h,f;void 0===t&&(t=1);i=[];try{for(o=v(n),u=o.next();!u.done;u=o.next()){for(r=u.value,s=0;s<i.length;++s)y=(w[i[s]]<<8)+r,i[s]=e.charCodeAt(y%58),r=y/58|0;for(;r;)i.push(e.charCodeAt(r%58)),r=r/58|0}}catch(n){c={error:n}}finally{try{u&&!u.done&&(p=o.return)&&p.call(o)}finally{if(c)throw c.error;}}try{for(h=v(n),f=h.next();!f.done;f=h.next()){if(f.value)break;i.push("1".charCodeAt(0))}}catch(n){l={error:n}}finally{try{f&&!f.done&&(b=h.return)&&b.call(h)}finally{if(l)throw l.error;}}return i.reverse(),String.fromCharCode.apply(String,a(i))}function d(n,t){for(var r=new Uint8Array(n.length+t.length),i=0;i<n.length;++i)r[i]=n[i];for(i=0;i<t.length;++i)r[n.length+i]=t.charCodeAt(i);return y(r)}function u(n,t,i,r){var u=l(i+4,n),e={type:t,data:new Uint8Array(u.buffer,0,i)},f=new Uint8Array(d(e.data,r));if(f[0]!==u[i+0]||f[1]!==u[i+1]||f[2]!==u[i+2]||f[3]!==u[i+3])throw new Error("checksum doesn't match");return e}function f(n,t,i){for(var f=new Uint8Array(d(n.data,t)),u=new Uint8Array(n.data.length+4),r=0;r<n.data.length;++r)u[r]=n.data[r];for(r=0;r<4;++r)u[r+n.data.length]=f[r];return i+k(u)}function g(n){var f;if("string"!=typeof n)throw new Error("expected string containing public key");if("EOS"===n.substr(0,3)){for(var i=l(t.publicKeyDataSize+4,n.substr(3)),o={type:r.k1,data:new Uint8Array(t.publicKeyDataSize)},e=0;e<t.publicKeyDataSize;++e)o.data[e]=i[e];if(f=new Uint8Array(y(o.data)),f[0]!==i[t.publicKeyDataSize]||f[1]!==i[34]||f[2]!==i[35]||f[3]!==i[36])throw new Error("checksum doesn't match");return o}if("PUB_K1_"===n.substr(0,7))return u(n.substr(7),r.k1,t.publicKeyDataSize,"K1");if("PUB_R1_"===n.substr(0,7))return u(n.substr(7),r.r1,t.publicKeyDataSize,"R1");throw new Error("unrecognized public key format");}function nt(n){if(n.type===r.k1&&n.data.length===t.publicKeyDataSize)return f(n,"K1","PUB_K1_");if(n.type===r.r1&&n.data.length===t.publicKeyDataSize)return f(n,"R1","PUB_R1_");throw new Error("unrecognized public key format");}function tt(n){return"EOS"===n.substr(0,3)?nt(g(n)):n}var it=this&&this.__read||function(n,t){var i="function"==typeof Symbol&&n[Symbol.iterator],r,f,u,e;if(!i)return n;u=i.call(n);e=[];try{for(;(void 0===t||t-->0)&&!(r=u.next()).done;)e.push(r.value)}catch(n){f={error:n}}finally{try{r&&!r.done&&(i=u.return)&&i.call(u)}finally{if(f)throw f.error;}}return e},a=this&&this.__spread||function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(it(arguments[t]));return n},v=this&&this.__values||function(n){var t="function"==typeof Symbol&&n[Symbol.iterator],i=0;return t?t.call(n):{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}}};Object.defineProperty(t,"__esModule",{value:!0});var y=i(6).RIPEMD160.hash,e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=function(){for(var t=Array(256).fill(-1),n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t}(),r,o=function(){for(var t=Array(256).fill(-1),n=0;n<p.length;++n)t[p.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}();t.isNegative=s;t.negate=h;t.decimalToBinary=b;t.signedDecimalToBinary=function(n,t){var r="-"===t[0],i;if(r&&(t=t.substr(1)),i=b(n,t),r){if(h(i),!s(i))throw new Error("number is out of range");}else if(s(i))throw new Error("number is out of range");return i};t.binaryToDecimal=c;t.signedBinaryToDecimal=function(n,t){if(void 0===t&&(t=1),s(n)){var i=n.slice();return h(i),"-"+c(i,t)}return c(n,t)};t.base58ToBinary=l;t.binaryToBase58=k;t.base64ToBinary=function(n){var i=n.length,f,r,u,t;if(1==(3&i)&&"="===n[i-1]&&(i-=1),0!=(3&i))throw new Error("base-64 value is not padded correctly");for(f=i>>2,r=3*f,i>0&&"="===n[i-1]&&(r-="="===n[i-2]?2:1),u=new Uint8Array(r),t=0;t<f;++t){var h=o[n.charCodeAt(4*t+0)],e=o[n.charCodeAt(4*t+1)],s=o[n.charCodeAt(4*t+2)],c=o[n.charCodeAt(4*t+3)];u[3*t+0]=h<<2|e>>4;3*t+1<r&&(u[3*t+1]=(15&e)<<4|s>>2);3*t+2<r&&(u[3*t+2]=(3&s)<<6|c)}return u},function(n){n[n.k1=0]="k1";n[n.r1=1]="r1"}(r=t.KeyType||(t.KeyType={}));t.publicKeyDataSize=33;t.privateKeyDataSize=32;t.signatureDataSize=65;t.stringToPublicKey=g;t.publicKeyToString=nt;t.convertLegacyPublicKey=tt;t.convertLegacyPublicKeys=function(n){return n.map(tt)};t.stringToPrivateKey=function(n){if("string"!=typeof n)throw new Error("expected string containing private key");if("PVT_R1_"===n.substr(0,7))return u(n.substr(7),r.r1,t.privateKeyDataSize,"R1");throw new Error("unrecognized private key format");};t.privateKeyToString=function(n){if(n.type===r.r1)return f(n,"R1","PVT_R1_");throw new Error("unrecognized private key format");};t.stringToSignature=function(n){if("string"!=typeof n)throw new Error("expected string containing signature");if("SIG_K1_"===n.substr(0,7))return u(n.substr(7),r.k1,t.signatureDataSize,"K1");if("SIG_R1_"===n.substr(0,7))return u(n.substr(7),r.r1,t.signatureDataSize,"R1");throw new Error("unrecognized signature format");};t.signatureToString=function(n){if(n.type===r.k1)return f(n,"K1","SIG_K1_");if(n.type===r.r1)return f(n,"R1","SIG_R1_");throw new Error("unrecognized signature format");}},function(n,t,i){"use strict";function a(n){var t=Date.parse(n);if(Number.isNaN(t))throw new Error("Invalid time format");return t}function k(n){return Math.round(1e3*a(n+"Z"))}function d(n){var t=new Date(n/1e3).toISOString();return t.substr(0,t.length-1)}function v(n){return Math.round(a(n+"Z")/1e3)}function y(n){var t=new Date(1e3*n).toISOString();return t.substr(0,t.length-1)}function g(n){return Math.round((a(n+"Z")-9466848e5)/500)}function nt(n){var t=new Date(500*n+9466848e5).toISOString();return t.substr(0,t.length-1)}function tt(n){if("string"!=typeof n)throw new Error("Expected string containing symbol");var t=n.match(/^([0-9]+),([A-Z]+)$/);if(!t)throw new Error("Invalid symbol");return{name:t[2],precision:+t[1]}}function it(n){var t=n.name;return n.precision+","+t}function o(n){var r,u,e="",i,t;try{for(i=f(n),t=i.next();!t.done;t=i.next())e+=("00"+t.value.toString(16)).slice(-2)}catch(n){r={error:n}}finally{try{t&&!t.done&&(u=i.return)&&u.call(i)}finally{if(r)throw r.error;}}return e.toUpperCase()}function s(n){var i;if("string"!=typeof n)throw new Error("Expected string containing hex digits");if(n.length%2)throw new Error("Odd number of hex digits");for(var r=n.length/2,u=new Uint8Array(r),t=0;t<r;++t){if(i=parseInt(n.substr(2*t,2),16),Number.isNaN(i))throw new Error("Expected hex string");u[t]=i}return u}function ot(){throw new Error("Don't know how to serialize "+this.name);}function st(){throw new Error("Don't know how to deserialize "+this.name);}function rt(n,t,i,r){var s,h,o,e,u;if(void 0===i&&(i=new c),void 0===r&&(r=!0),"object"!=typeof t)throw new Error("expected object containing data: "+JSON.stringify(t));this.base&&this.base.serialize(n,t,i,r);try{for(o=f(this.fields),e=o.next();!e.done;e=o.next())if(u=e.value,u.name in t){if(i.skippedBinaryExtension)throw new Error("unexpected "+this.name+"."+u.name);u.type.serialize(n,t[u.name],i,r&&u===this.fields[this.fields.length-1])}else{if(!r||!u.type.extensionOf)throw new Error("missing "+this.name+"."+u.name+" (type="+u.type.name+")");i.skippedBinaryExtension=!0}}catch(n){s={error:n}}finally{try{e&&!e.done&&(h=o.return)&&h.call(o)}finally{if(s)throw s.error;}}}function ut(n,t,i){var o,h,s,u,r,e;void 0===t&&(t=new c);void 0===i&&(i=!0);s=this.base?this.base.deserialize(n,t,i):{};try{for(u=f(this.fields),r=u.next();!r.done;r=u.next())e=r.value,i&&e.type.extensionOf&&!n.haveReadData()?t.skippedBinaryExtension=!0:s[e.name]=e.type.deserialize(n,t,i)}catch(n){o={error:n}}finally{try{r&&!r.done&&(h=u.return)&&h.call(u)}finally{if(o)throw o.error;}}return s}function ht(n,t,i,r){if(!Array.isArray(t)||2!==t.length||"string"!=typeof t[0])throw new Error('expected variant: ["type", value]');var u=this.fields.findIndex(function(n){return n.name===t[0]});if(u<0)throw new Error('type "'+t[0]+'" is not valid for variant');n.pushVaruint32(u);this.fields[u].type.serialize(n,t[1],i,r)}function ct(n,t,i){var r=n.getVaruint32(),u;if(r>=this.fields.length)throw new Error("type index "+r+" is not valid for variant");return u=this.fields[r],[u.name,u.type.deserialize(n,t,i)]}function lt(n,t,i){var e,o,u,r,s;n.pushVaruint32(t.length);try{for(u=f(t),r=u.next();!r.done;r=u.next())s=r.value,this.arrayOf.serialize(n,s,i,!1)}catch(n){e={error:n}}finally{try{r&&!r.done&&(o=u.return)&&o.call(u)}finally{if(e)throw e.error;}}}function at(n,t){for(var u=n.getVaruint32(),i=[],r=0;r<u;++r)i.push(this.arrayOf.deserialize(n,t,!1));return i}function vt(n,t,i,r){null==t?n.push(0):(n.push(1),this.optionalOf.serialize(n,t,i,r))}function yt(n,t,i){return n.get()?this.optionalOf.deserialize(n,t,i):null}function pt(n,t,i,r){this.extensionOf.serialize(n,t,i,r)}function wt(n,t,i){return this.extensionOf.deserialize(n,t,i)}function r(n){return p({name:"<missing name>",aliasOfName:"",arrayOf:null,optionalOf:null,extensionOf:null,baseName:"",base:null,fields:[],serialize:ot,deserialize:st},n)}function e(n,t){if(Number.isNaN(+n)||Number.isNaN(+t)||"number"!=typeof n&&"string"!=typeof n)throw new Error("Expected number");if(+n!=+t)throw new Error("Number is out of range");return+n}function h(n,t){var i=n.get(t);if(i&&i.aliasOfName)return h(n,i.aliasOfName);if(i)return i;if(t.endsWith("[]"))return r({name:t,arrayOf:h(n,t.substr(0,t.length-2)),serialize:lt,deserialize:at});if(t.endsWith("?"))return r({name:t,optionalOf:h(n,t.substr(0,t.length-1)),serialize:vt,deserialize:yt});if(t.endsWith("$"))return r({name:t,extensionOf:h(n,t.substr(0,t.length-1)),serialize:pt,deserialize:wt});throw new Error("Unknown type: "+t);}function ft(n,t,i,r,u,f){var s=n.actions.get(i),e;if(!s)throw new Error("Unknown action "+i+" in contract "+t);return e=new l({textEncoder:u,textDecoder:f}),s.serialize(e,r),o(e.asUint8Array())}function et(n,t,i,r,u,f){var o=n.actions.get(i),e;if("string"==typeof r&&(r=s(r)),!o)throw new Error("Unknown action "+i+" in contract "+t);return e=new l({textDecoder:f,textEncoder:u}),e.pushArray(r),o.deserialize(e)}var p=this&&this.__assign||function(){return(p=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},w=this&&this.__read||function(n,t){var i="function"==typeof Symbol&&n[Symbol.iterator],r,f,u,e;if(!i)return n;u=i.call(n);e=[];try{for(;(void 0===t||t-->0)&&!(r=u.next()).done;)e.push(r.value)}catch(n){f={error:n}}finally{try{r&&!r.done&&(i=u.return)&&i.call(u)}finally{if(f)throw f.error;}}return e},b=this&&this.__spread||function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(w(arguments[t]));return n},f=this&&this.__values||function(n){var t="function"==typeof Symbol&&n[Symbol.iterator],i=0;return t?t.call(n):{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}}},u,c,l;Object.defineProperty(t,"__esModule",{value:!0});u=i(0);c=function(n){void 0===n&&(n={});this.skippedBinaryExtension=!1;this.options=n};t.SerializerState=c;l=function(){function n(n){var t=void 0===n?{}:n,r=t.textEncoder,u=t.textDecoder,i=t.array;this.readPos=0;this.array=i||new Uint8Array(1024);this.length=i?i.length:0;this.textEncoder=r||new TextEncoder;this.textDecoder=u||new TextDecoder("utf-8",{fatal:!0})}return n.prototype.reserve=function(n){var t,i;if(!(this.length+n<=this.array.length)){for(t=this.array.length;this.length+n>t;)t=Math.ceil(1.5*t);i=new Uint8Array(t);i.set(this.array);this.array=i}},n.prototype.haveReadData=function(){return this.readPos<this.length},n.prototype.restartRead=function(){this.readPos=0},n.prototype.asUint8Array=function(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.length)},n.prototype.pushArray=function(n){this.reserve(n.length);this.array.set(n,this.length);this.length+=n.length},n.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.pushArray(t)},n.prototype.get=function(){if(this.readPos<this.length)return this.array[this.readPos++];throw new Error("Read past end of buffer");},n.prototype.pushUint8ArrayChecked=function(n,t){if(n.length!==t)throw new Error("Binary data has incorrect size");this.pushArray(n)},n.prototype.getUint8Array=function(n){if(this.readPos+n>this.length)throw new Error("Read past end of buffer");var t=new Uint8Array(this.array.buffer,this.array.byteOffset+this.readPos,n);return this.readPos+=n,t},n.prototype.pushUint16=function(n){this.push(n>>0&255,n>>8&255)},n.prototype.getUint16=function(){var n=0;return n|=this.get()<<0,n^this.get()<<8},n.prototype.pushUint32=function(n){this.push(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},n.prototype.getUint32=function(){var n=0;return n|=this.get()<<0,n|=this.get()<<8,n|=this.get()<<16,(n|=this.get()<<24)>>>0},n.prototype.pushNumberAsUint64=function(n){this.pushUint32(n>>>0);this.pushUint32(Math.floor(n/4294967296)>>>0)},n.prototype.getUint64AsNumber=function(){var n=this.getUint32();return 4294967296*(this.getUint32()>>>0)+(n>>>0)},n.prototype.pushVaruint32=function(n){for(;;){if(!(n>>>7)){this.push(n);break}this.push(128|127&n);n>>>=7}},n.prototype.getVaruint32=function(){for(var i,n=0,t=0;;)if(i=this.get(),n|=(127&i)<<t,t+=7,!(128&i))break;return n>>>0},n.prototype.pushVarint32=function(n){this.pushVaruint32(n<<1^n>>31)},n.prototype.getVarint32=function(){var n=this.getVaruint32();return 1&n?~n>>1|2147483648:n>>>1},n.prototype.pushFloat32=function(n){this.pushArray(new Uint8Array(new Float32Array([n]).buffer))},n.prototype.getFloat32=function(){return new Float32Array(this.getUint8Array(4).slice().buffer)[0]},n.prototype.pushFloat64=function(n){this.pushArray(new Uint8Array(new Float64Array([n]).buffer))},n.prototype.getFloat64=function(){return new Float64Array(this.getUint8Array(8).slice().buffer)[0]},n.prototype.pushName=function(n){function e(n){return n>="a".charCodeAt(0)&&n<="z".charCodeAt(0)?n-"a".charCodeAt(0)+6:n>="1".charCodeAt(0)&&n<="5".charCodeAt(0)?n-"1".charCodeAt(0)+1:0}var u,i;if("string"!=typeof n)throw new Error("Expected string containing name");for(var f=new Uint8Array(8),t=63,r=0;r<n.length;++r)for(u=e(n.charCodeAt(r)),t<5&&(u<<=1),i=4;i>=0;--i)t>=0&&(f[Math.floor(t/8)]|=(u>>i&1)<<t%8,--t);this.pushArray(f)},n.prototype.getName=function(){for(var n,r,u=this.getUint8Array(8),t="",i=63;i>=0;){for(n=0,r=0;r<5;++r)i>=0&&(n=n<<1|u[Math.floor(i/8)]>>i%8&1,--i);t+=n>=6?String.fromCharCode(n+"a".charCodeAt(0)-6):n>=1?String.fromCharCode(n+"1".charCodeAt(0)-1):"."}for(;t.endsWith(".");)t=t.substr(0,t.length-1);return t},n.prototype.pushBytes=function(n){this.pushVaruint32(n.length);this.pushArray(n)},n.prototype.getBytes=function(){return this.getUint8Array(this.getVaruint32())},n.prototype.pushString=function(n){this.pushBytes(this.textEncoder.encode(n))},n.prototype.getString=function(){return this.textDecoder.decode(this.getBytes())},n.prototype.pushSymbolCode=function(n){if("string"!=typeof n)throw new Error("Expected string containing symbol_code");var t=[];for(t.push.apply(t,b(this.textEncoder.encode(n)));t.length<8;)t.push(0);this.pushArray(t.slice(0,8))},n.prototype.getSymbolCode=function(){for(var t=this.getUint8Array(8),n=0;n<t.length&&t[n];++n);return this.textDecoder.decode(new Uint8Array(t.buffer,t.byteOffset,n))},n.prototype.pushSymbol=function(n){var i=n.name,t=[255&n.precision];for(t.push.apply(t,b(this.textEncoder.encode(i)));t.length<8;)t.push(0);this.pushArray(t.slice(0,8))},n.prototype.getSymbol=function(){for(var i=this.get(),t=this.getUint8Array(7),n=0;n<t.length&&t[n];++n);return{name:this.textDecoder.decode(new Uint8Array(t.buffer,t.byteOffset,n)),precision:i}},n.prototype.pushAsset=function(n){var r,e;if("string"!=typeof n)throw new Error("Expected string containing asset");var t=0,i="",f=0;for("-"===(n=n.trim())[t]&&(i+="-",++t),r=!1;t<n.length&&n.charCodeAt(t)>="0".charCodeAt(0)&&n.charCodeAt(t)<="9".charCodeAt(0);)r=!0,i+=n[t],++t;if(!r)throw new Error("Asset must begin with a number");if("."===n[t])for(++t;t<n.length&&n.charCodeAt(t)>="0".charCodeAt(0)&&n.charCodeAt(t)<="9".charCodeAt(0);)i+=n[t],++f,++t;e=n.substr(t).trim();this.pushArray(u.signedDecimalToBinary(8,i));this.pushSymbol({name:e,precision:f})},n.prototype.getAsset=function(){var r=this.getUint8Array(8),i=this.getSymbol(),f=i.name,t=i.precision,n=u.signedBinaryToDecimal(r,t+1);return t&&(n=n.substr(0,n.length-t)+"."+n.substr(n.length-t)),n+" "+f},n.prototype.pushPublicKey=function(n){var t=u.stringToPublicKey(n);this.push(t.type);this.pushArray(t.data)},n.prototype.getPublicKey=function(){var n=this.get(),t=this.getUint8Array(u.publicKeyDataSize);return u.publicKeyToString({type:n,data:t})},n.prototype.pushPrivateKey=function(n){var t=u.stringToPrivateKey(n);this.push(t.type);this.pushArray(t.data)},n.prototype.getPrivateKey=function(){var n=this.get(),t=this.getUint8Array(u.privateKeyDataSize);return u.privateKeyToString({type:n,data:t})},n.prototype.pushSignature=function(n){var t=u.stringToSignature(n);this.push(t.type);this.pushArray(t.data)},n.prototype.getSignature=function(){var n=this.get(),t=this.getUint8Array(u.signatureDataSize);return u.signatureToString({type:n,data:t})},n}();t.SerialBuffer=l;t.supportedAbiVersion=function(n){return n.startsWith("eosio::abi/1.")};t.dateToTimePoint=k;t.timePointToDate=d;t.dateToTimePointSec=v;t.timePointSecToDate=y;t.dateToBlockTimestamp=g;t.blockTimestampToDate=nt;t.stringToSymbol=tt;t.symbolToString=it;t.arrayToHex=o;t.hexToUint8Array=s;t.createInitialTypes=function(){var n=new Map(Object.entries({bool:r({name:"bool",serialize:function(n,t){if("boolean"!=typeof t)throw new Error("Expected true or false");n.push(t?1:0)},deserialize:function(n){return!!n.get()}}),uint8:r({name:"uint8",serialize:function(n,t){n.push(e(t,255&t))},deserialize:function(n){return n.get()}}),int8:r({name:"int8",serialize:function(n,t){n.push(e(t,t<<24>>24))},deserialize:function(n){return n.get()<<24>>24}}),uint16:r({name:"uint16",serialize:function(n,t){n.pushUint16(e(t,65535&t))},deserialize:function(n){return n.getUint16()}}),int16:r({name:"int16",serialize:function(n,t){n.pushUint16(e(t,t<<16>>16))},deserialize:function(n){return n.getUint16()<<16>>16}}),uint32:r({name:"uint32",serialize:function(n,t){n.pushUint32(e(t,t>>>0))},deserialize:function(n){return n.getUint32()}}),uint64:r({name:"uint64",serialize:function(n,t){n.pushArray(u.decimalToBinary(8,""+t))},deserialize:function(n){return u.binaryToDecimal(n.getUint8Array(8))}}),int64:r({name:"int64",serialize:function(n,t){n.pushArray(u.signedDecimalToBinary(8,""+t))},deserialize:function(n){return u.signedBinaryToDecimal(n.getUint8Array(8))}}),int32:r({name:"int32",serialize:function(n,t){n.pushUint32(e(t,0|t))},deserialize:function(n){return 0|n.getUint32()}}),varuint32:r({name:"varuint32",serialize:function(n,t){n.pushVaruint32(e(t,t>>>0))},deserialize:function(n){return n.getVaruint32()}}),varint32:r({name:"varint32",serialize:function(n,t){n.pushVarint32(e(t,0|t))},deserialize:function(n){return n.getVarint32()}}),uint128:r({name:"uint128",serialize:function(n,t){n.pushArray(u.decimalToBinary(16,""+t))},deserialize:function(n){return u.binaryToDecimal(n.getUint8Array(16))}}),int128:r({name:"int128",serialize:function(n,t){n.pushArray(u.signedDecimalToBinary(16,""+t))},deserialize:function(n){return u.signedBinaryToDecimal(n.getUint8Array(16))}}),float32:r({name:"float32",serialize:function(n,t){n.pushFloat32(t)},deserialize:function(n){return n.getFloat32()}}),float64:r({name:"float64",serialize:function(n,t){n.pushFloat64(t)},deserialize:function(n){return n.getFloat64()}}),float128:r({name:"float128",serialize:function(n,t){n.pushUint8ArrayChecked(s(t),16)},deserialize:function(n){return o(n.getUint8Array(16))}}),bytes:r({name:"bytes",serialize:function(n,t){t instanceof Uint8Array||Array.isArray(t)?n.pushBytes(t):n.pushBytes(s(t))},deserialize:function(n,t){return t&&t.options.bytesAsUint8Array?n.getBytes():o(n.getBytes())}}),string:r({name:"string",serialize:function(n,t){n.pushString(t)},deserialize:function(n){return n.getString()}}),name:r({name:"name",serialize:function(n,t){n.pushName(t)},deserialize:function(n){return n.getName()}}),time_point:r({name:"time_point",serialize:function(n,t){n.pushNumberAsUint64(k(t))},deserialize:function(n){return d(n.getUint64AsNumber())}}),time_point_sec:r({name:"time_point_sec",serialize:function(n,t){n.pushUint32(v(t))},deserialize:function(n){return y(n.getUint32())}}),block_timestamp_type:r({name:"block_timestamp_type",serialize:function(n,t){n.pushUint32(g(t))},deserialize:function(n){return nt(n.getUint32())}}),symbol_code:r({name:"symbol_code",serialize:function(n,t){n.pushSymbolCode(t)},deserialize:function(n){return n.getSymbolCode()}}),symbol:r({name:"symbol",serialize:function(n,t){n.pushSymbol(tt(t))},deserialize:function(n){return it(n.getSymbol())}}),asset:r({name:"asset",serialize:function(n,t){n.pushAsset(t)},deserialize:function(n){return n.getAsset()}}),checksum160:r({name:"checksum160",serialize:function(n,t){n.pushUint8ArrayChecked(s(t),20)},deserialize:function(n){return o(n.getUint8Array(20))}}),checksum256:r({name:"checksum256",serialize:function(n,t){n.pushUint8ArrayChecked(s(t),32)},deserialize:function(n){return o(n.getUint8Array(32))}}),checksum512:r({name:"checksum512",serialize:function(n,t){n.pushUint8ArrayChecked(s(t),64)},deserialize:function(n){return o(n.getUint8Array(64))}}),public_key:r({name:"public_key",serialize:function(n,t){n.pushPublicKey(t)},deserialize:function(n){return n.getPublicKey()}}),private_key:r({name:"private_key",serialize:function(n,t){n.pushPrivateKey(t)},deserialize:function(n){return n.getPrivateKey()}}),signature:r({name:"signature",serialize:function(n,t){n.pushSignature(t)},deserialize:function(n){return n.getSignature()}})}));return n.set("extended_asset",r({name:"extended_asset",baseName:"",fields:[{name:"quantity",typeName:"asset",type:n.get("asset")},{name:"contract",typeName:"name",type:n.get("name")}],serialize:rt,deserialize:ut})),n};t.getType=h;t.getTypesFromAbi=function(n,t){var k,ot,d,st,g,lt,nt,at,tt,vt,i=new Map(n),l,u,v,e,y,o,p,s,ft,b,c,et;if(t.types)try{for(l=f(t.types),u=l.next();!u.done;u=l.next()){var yt=u.value,pt=yt.new_type_name,a=yt.type;i.set(pt,r({name:pt,aliasOfName:a}))}}catch(n){k={error:n}}finally{try{u&&!u.done&&(ot=l.return)&&ot.call(l)}finally{if(k)throw k.error;}}if(t.structs)try{for(v=f(t.structs),e=v.next();!e.done;e=v.next()){var it=e.value,wt=it.name,dt=it.base,gt=it.fields;i.set(wt,r({name:wt,baseName:dt,fields:gt.map(function(n){return{name:n.name,typeName:n.type,type:null}}),serialize:rt,deserialize:ut}))}}catch(n){d={error:n}}finally{try{e&&!e.done&&(st=v.return)&&st.call(v)}finally{if(d)throw d.error;}}if(t.variants)try{for(y=f(t.variants),o=y.next();!o.done;o=y.next()){var bt=o.value,kt=bt.name,ni=bt.types;i.set(kt,r({name:kt,fields:ni.map(function(n){return{name:n,typeName:n,type:null}}),serialize:ht,deserialize:ct}))}}catch(n){g={error:n}}finally{try{o&&!o.done&&(lt=y.return)&&lt.call(y)}finally{if(g)throw g.error;}}try{for(p=f(i),s=p.next();!s.done;s=p.next()){ft=w(s.value,2);ft[0];(a=ft[1]).baseName&&(a.base=h(i,a.baseName));try{for(b=f(a.fields),c=b.next();!c.done;c=b.next())et=c.value,et.type=h(i,et.typeName)}catch(n){tt={error:n}}finally{try{c&&!c.done&&(vt=b.return)&&vt.call(b)}finally{if(tt)throw tt.error;}}}}catch(n){nt={error:n}}finally{try{s&&!s.done&&(at=p.return)&&at.call(p)}finally{if(nt)throw nt.error;}}return i};t.transactionHeader=function(n,t){return{expiration:y(v(n.timestamp)+t),ref_block_num:65535&n.block_num,ref_block_prefix:n.ref_block_prefix}};t.serializeActionData=ft;t.serializeAction=function(n,t,i,r,u,f,e){return{account:t,name:i,authorization:r,data:ft(n,t,i,u,f,e)}};t.deserializeActionData=et;t.deserializeAction=function(n,t,i,r,u,f,e){return{account:t,name:i,authorization:r,data:et(n,t,i,u,f,e)}}},function(n,t){"use strict";var i,u=this&&this.__extends||(i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function r(){this.constructor=n}i(n,t);n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),r;Object.defineProperty(t,"__esModule",{value:!0});r=function(n){function t(i){var r=this;return r=i.error&&i.error.details&&i.error.details.length&&i.error.details[0].message?n.call(this,i.error.details[0].message)||this:i.processed&&i.processed.except&&i.processed.except.message?n.call(this,i.processed.except.message)||this:n.call(this,i.message)||this,Object.setPrototypeOf(r,t.prototype),r.json=i,r}return u(t,n),t}(Error);t.RpcError=r},function(n,t,i){"use strict";var r=this&&this.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){var t;n.done?u(n.value):(t=n.value,t instanceof i?t:new i(function(n){n(t)})).then(o,s)}e((r=r.apply(n,t||[])).next())})},u=this&&this.__generator||function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},o=this&&this.__read||function(n,t){var i="function"==typeof Symbol&&n[Symbol.iterator],r,f,u,e;if(!i)return n;u=i.call(n);e=[];try{for(;(void 0===t||t-->0)&&!(r=u.next()).done;)e.push(r.value)}catch(n){f={error:n}}finally{try{r&&!r.done&&(i=u.return)&&i.call(u)}finally{if(f)throw f.error;}}return e},f=this&&this.__spread||function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(o(arguments[t]));return n};Object.defineProperty(t,"__esModule",{value:!0});var e=i(4),s=i(13),h=function(){function n(n,t,i,r,u,f,o){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===r&&(r=!0),void 0===u&&(u=null),void 0===f&&(f="https://all-access.wax.io"),void 0===o&&(o="https://api-idm.wax.io/v1/accounts/auto-accept/"),this.apiSigner=u,this.waxSigningURL=f,this.waxAutoSigningURL=o,this.waxEventSource=new s.WaxEventSource(f),this.rpc=new e.JsonRpc(n),t&&Array.isArray(i)){var h={userAccount:t,pubKeys:i,verified:!0};this.receiveLogin({data:h})}else r&&this.loginViaEndpoint()}return n.prototype.login=function(){return r(this,void 0,void 0,function(){return u(this,function(){return this.userAccount&&Array.isArray(this.pubKeys)?[2,this.userAccount]:[2,this.loginViaWindow()]})})},n.prototype.isAutoLoginAvailable=function(){return r(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return this.userAccount&&Array.isArray(this.pubKeys)?[2,!0]:[3,1];case 1:return n.trys.push([1,3,,4]),[4,this.loginViaEndpoint()];case 2:return n.sent(),[2,!0];case 3:return n.sent(),[2,!1];case 4:return[2,!1]}})})},n.prototype.loginViaWindow=function(){return r(this,void 0,void 0,function(){var n;return u(this,function(t){switch(t.label){case 0:return[4,this.waxEventSource.openEventSource(this.waxSigningURL+"/cloud-wallet/login/")];case 1:return n=t.sent(),[2,this.waxEventSource.onceEvent(n,this.waxSigningURL,this.receiveLogin.bind(this))]}})})},n.prototype.loginViaEndpoint=function(){return r(this,void 0,void 0,function(){var n,t;return u(this,function(i){switch(i.label){case 0:return[4,fetch(this.waxAutoSigningURL+"login",{credentials:"include",method:"get"})];case 1:if(!(n=i.sent()).ok)throw new Error("Login Endpoint Error "+n.status+" "+n.statusText);return[4,n.json()];case 2:if((t=i.sent()).processed&&t.processed.except)throw new Error(t);return[2,this.receiveLogin({data:t})]}})})},n.prototype.receiveLogin=function(n){return r(this,void 0,void 0,function(){var t,h,i,o,c,l,a,v,y,s=this;return u(this,function(){if(t=n.data,h=t.verified,i=t.userAccount,o=t.pubKeys,c=t.whitelistedContracts,l=t.autoLogin,!h)throw new Error("User declined to share their user account");if(null==i||null==o)throw new Error("User does not have a blockchain account");return localStorage.setItem("autoLogin",l),this.whitelistedContracts=c||[],this.userAccount=i,this.pubKeys=o,a={getAvailableKeys:function(){return r(s,void 0,void 0,function(){var t,n;return u(this,function(i){switch(i.label){case 0:return t=[this.pubKeys],(n=this.apiSigner)?[4,this.apiSigner.getAvailableKeys()]:[3,2];case 1:n=i.sent();i.label=2;case 2:return[2,f.apply(void 0,t.concat([n||[]]))]}})})},sign:function(n){return r(s,void 0,void 0,function(){var t,r,i;return u(this,function(u){switch(u.label){case 0:return t={serializedTransaction:n.serializedTransaction},[4,this.signing(n.serializedTransaction)];case 1:return r=[u.sent()],(i=this.apiSigner)?[4,this.apiSigner.sign(n)]:[3,3];case 2:i=u.sent().signatures;u.label=3;case 3:return[2,(t.signatures=f.apply(void 0,r.concat([i||[]])),t)]}})})}},this.api=new e.Api({rpc:this.rpc,signatureProvider:a}),v=this.api.transact.bind(this.api),y=this.waxSigningURL+"/cloud-wallet/signing/",this.api.transact=function(n,t){return r(s,void 0,void 0,function(){var i;return u(this,function(r){switch(r.label){case 0:return[4,this.canAutoSign(n)];case 1:return r.sent()?[3,3]:(i=this,[4,window.open(y,"WaxPopup","height=800,width=600")]);case 2:i.signingWindow=r.sent();r.label=3;case 3:return[4,v(n,t)];case 4:return[2,r.sent()]}})})},[2,this.userAccount]})})},n.prototype.canAutoSign=function(n){return r(this,void 0,void 0,function(){var t,i=this;return u(this,function(r){switch(r.label){case 0:return n.actions?(t=n,[3,3]):[3,1];case 1:return[4,this.api.deserializeTransactionWithActions(n)];case 2:t=r.sent();r.label=3;case 3:return[2,!t.actions.find(function(n){return!i.isWhitelisted(n)})]}})})},n.prototype.isWhitelisted=function(n){return!!this.whitelistedContracts.find(function(t){return t.contract===n.account&&("eosio.token"!==n.account||"transfer"!==n.name||t.recipients.includes(n.data.to))})},n.prototype.signing=function(n){return r(this,void 0,void 0,function(){var t=this;return u(this,function(i){switch(i.label){case 0:return[4,this.canAutoSign(n)];case 1:return i.sent()?[2,this.signViaEndpoint(n).catch(function(){return t.signViaWindow(void 0,n)})]:[2,this.signViaWindow(this.signingWindow,n)]}})})},n.prototype.signViaEndpoint=function(n){return r(this,void 0,void 0,function(){var t,i,r;return u(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,fetch(this.waxAutoSigningURL+"signing",{body:JSON.stringify({transaction:Object.values(n)}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"})];case 1:if(!(t=u.sent()).ok)throw new Error("Signing Endpoint Error "+t.status+" "+t.statusText);return[4,t.json()];case 2:if((i=u.sent()).processed&&i.processed.except)throw new Error(i);return[2,this.receiveSignatures({data:i})];case 3:throw r=u.sent(),this.whitelistedContracts=[],r;case 4:return[2]}})})},n.prototype.signViaWindow=function(n,t){return r(this,void 0,void 0,function(){var i;return u(this,function(r){switch(r.label){case 0:return[4,this.waxEventSource.openEventSource(this.waxSigningURL+"/cloud-wallet/signing/",{type:"TRANSACTION",transaction:t},n)];case 1:return i=r.sent(),[2,this.waxEventSource.onceEvent(i,this.waxSigningURL,this.receiveSignatures.bind(this))]}})})},n.prototype.receiveSignatures=function(n){return r(this,void 0,void 0,function(){var t,r,i,f;return u(this,function(){if("TX_SIGNED"===n.data.type){if(t=n.data,r=t.verified,i=t.signatures,f=t.whitelistedContracts,!r||null==i)throw new Error("User declined to sign the transaction");return this.whitelistedContracts=f||[],[2,i]}return[2]})})},n}();t.WaxJS=h},function(n,t,i){"use strict";var r,u,f,e,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});r=i(5);t.Api=r.Api;u=i(9);t.ApiInterfaces=u;f=i(10);t.JsonRpc=f.JsonRpc;e=i(0);t.Numeric=e;o=i(12);t.RpcInterfaces=o;s=i(2);t.RpcError=s.RpcError;h=i(1);t.Serialize=h},function(n,t,i){"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},u=this&&this.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},f=this&&this.__generator||function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},o=this&&this.__rest||function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},s=this&&this.__read||function(n,t){var i="function"==typeof Symbol&&n[Symbol.iterator],r,f,u,e;if(!i)return n;u=i.call(n);e=[];try{for(;(void 0===t||t-->0)&&!(r=u.next()).done;)e.push(r.value)}catch(n){f={error:n}}finally{try{r&&!r.done&&(i=u.return)&&i.call(u)}finally{if(f)throw f.error;}}return e},h=this&&this.__spread||function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(s(arguments[t]));return n},c=this&&this.__values||function(n){var t="function"==typeof Symbol&&n[Symbol.iterator],i=0;return t?t.call(n):{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),l=i(7),a=i(8),v=function(){function n(n){this.contracts=new Map;this.cachedAbis=new Map;this.rpc=n.rpc;this.authorityProvider=n.authorityProvider||n.rpc;this.abiProvider=n.abiProvider||n.rpc;this.signatureProvider=n.signatureProvider;this.chainId=n.chainId;this.textEncoder=n.textEncoder;this.textDecoder=n.textDecoder;this.abiTypes=r.getTypesFromAbi(r.createInitialTypes(),l);this.transactionTypes=r.getTypesFromAbi(r.createInitialTypes(),a)}return n.prototype.rawAbiToJson=function(n){var t=new r.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder,array:n});if(!r.supportedAbiVersion(t.getString()))throw new Error("Unsupported abi version");return t.restartRead(),this.abiTypes.get("abi_def").deserialize(t)},n.prototype.getCachedAbi=function(n,t){return void 0===t&&(t=!1),u(this,void 0,void 0,function(){var i,r,e,u;return f(this,function(f){switch(f.label){case 0:if(!t&&this.cachedAbis.get(n))return[2,this.cachedAbis.get(n)];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.abiProvider.getRawAbi(n)];case 2:return r=f.sent().abi,e=this.rawAbiToJson(r),i={rawAbi:r,abi:e},[3,4];case 3:throw(u=f.sent()).message="fetching abi for "+n+": "+u.message,u;case 4:if(!i)throw new Error("Missing abi for "+n);return this.cachedAbis.set(n,i),[2,i]}})})},n.prototype.getAbi=function(n,t){return void 0===t&&(t=!1),u(this,void 0,void 0,function(){return f(this,function(i){switch(i.label){case 0:return[4,this.getCachedAbi(n,t)];case 1:return[2,i.sent().abi]}})})},n.prototype.getTransactionAbis=function(n,t){return void 0===t&&(t=!1),u(this,void 0,void 0,function(){var i,r,e,o=this;return f(this,function(){return i=n.actions.map(function(n){return n.account}),r=new Set(i),e=h(r).map(function(n){return u(o,void 0,void 0,function(){var i;return f(this,function(r){switch(r.label){case 0:return i={accountName:n},[4,this.getCachedAbi(n,t)];case 1:return[2,(i.abi=r.sent().rawAbi,i)]}})})}),[2,Promise.all(e)]})})},n.prototype.getContract=function(n,t){return void 0===t&&(t=!1),u(this,void 0,void 0,function(){var e,v,o,s,h,u,i,l,y,p,a;return f(this,function(f){switch(f.label){case 0:return!t&&this.contracts.get(n)?[2,this.contracts.get(n)]:[4,this.getAbi(n,t)];case 1:o=f.sent();s=r.getTypesFromAbi(r.createInitialTypes(),o);h=new Map;try{for(u=c(o.actions),i=u.next();!i.done;i=u.next())l=i.value,y=l.name,p=l.type,h.set(y,r.getType(s,p))}catch(n){e={error:n}}finally{try{i&&!i.done&&(v=u.return)&&v.call(u)}finally{if(e)throw e.error;}}return a={types:s,actions:h},this.contracts.set(n,a),[2,a]}})})},n.prototype.serialize=function(n,t,i){this.transactionTypes.get(t).serialize(n,i)},n.prototype.deserialize=function(n,t){return this.transactionTypes.get(t).deserialize(n)},n.prototype.serializeTransaction=function(n){var t=new r.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return this.serialize(t,"transaction",e({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[],transaction_extensions:[]},n)),t.asUint8Array()},n.prototype.deserializeTransaction=function(n){var t=new r.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return t.pushArray(n),this.deserialize(t,"transaction")},n.prototype.serializeActions=function(n){return u(this,void 0,void 0,function(){var t=this;return f(this,function(i){switch(i.label){case 0:return[4,Promise.all(n.map(function(n){var i=n.account,e=n.name,o=n.authorization,s=n.data;return u(t,void 0,void 0,function(){var n;return f(this,function(t){switch(t.label){case 0:return[4,this.getContract(i)];case 1:return n=t.sent(),[2,r.serializeAction(n,i,e,o,s,this.textEncoder,this.textDecoder)]}})})}))];case 1:return[2,i.sent()]}})})},n.prototype.deserializeActions=function(n){return u(this,void 0,void 0,function(){var t=this;return f(this,function(i){switch(i.label){case 0:return[4,Promise.all(n.map(function(n){var i=n.account,e=n.name,o=n.authorization,s=n.data;return u(t,void 0,void 0,function(){var n;return f(this,function(t){switch(t.label){case 0:return[4,this.getContract(i)];case 1:return n=t.sent(),[2,r.deserializeAction(n,i,e,o,s,this.textEncoder,this.textDecoder)]}})})}))];case 1:return[2,i.sent()]}})})},n.prototype.deserializeTransactionWithActions=function(n){return u(this,void 0,void 0,function(){var t,i;return f(this,function(u){switch(u.label){case 0:return"string"==typeof n&&(n=r.hexToUint8Array(n)),t=this.deserializeTransaction(n),[4,this.deserializeActions(t.actions)];case 1:return i=u.sent(),[2,e({},t,{actions:i})]}})})},n.prototype.transact=function(n,t){var i=void 0===t?{}:t,o=i.broadcast,l=void 0===o||o,s=i.sign,a=void 0===s||s,h=i.blocksBehind,c=i.expireSeconds;return u(this,void 0,void 0,function(){var t,s,v,y,u,o,i,p,w;return f(this,function(f){switch(f.label){case 0:return this.chainId?[3,2]:[4,this.rpc.get_info()];case 1:t=f.sent();this.chainId=t.chain_id;f.label=2;case 2:return"number"==typeof h&&c?t?[3,4]:[4,this.rpc.get_info()]:[3,6];case 3:t=f.sent();f.label=4;case 4:return[4,this.rpc.get_block(t.head_block_num-h)];case 5:s=f.sent();n=e({},r.transactionHeader(s,c),n);f.label=6;case 6:if(!this.hasRequiredTaposFields(n))throw new Error("Required configuration or TAPOS fields are not present");return[4,this.getTransactionAbis(n)];case 7:return v=f.sent(),y=[{},n],u={},[4,this.serializeActions(n.actions)];case 8:return n=e.apply(void 0,y.concat([(u.actions=f.sent(),u)])),o=this.serializeTransaction(n),i={serializedTransaction:o,signatures:[]},a?[4,this.signatureProvider.getAvailableKeys()]:[3,12];case 9:return p=f.sent(),[4,this.authorityProvider.getRequiredKeys({transaction:n,availableKeys:p})];case 10:return w=f.sent(),[4,this.signatureProvider.sign({chainId:this.chainId,requiredKeys:w,serializedTransaction:o,abis:v})];case 11:i=f.sent();f.label=12;case 12:return l?[2,this.pushSignedTransaction(i)]:[2,i]}})})},n.prototype.pushSignedTransaction=function(n){var t=n.signatures,i=n.serializedTransaction;return u(this,void 0,void 0,function(){return f(this,function(){return[2,this.rpc.push_transaction({signatures:t,serializedTransaction:i})]})})},n.prototype.hasRequiredTaposFields=function(n){var t=n.expiration,i=n.ref_block_num,r=n.ref_block_prefix;return o(n,["expiration","ref_block_num","ref_block_prefix"]),!!(t&&i&&r)},n}();t.Api=v},function(n){"use strict";var t=function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,t){var r=[],u=!0,f=!1,e=void 0,o,i;try{for(i=n[Symbol.iterator]();!(u=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);u=!0);}catch(n){f=!0;e=n}finally{try{!u&&i.return&&i.return()}finally{if(f)throw e;}}return r}(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance");},i=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return i(n,null,[{key:"get_n_pad_bytes",value:function(n){return 64-(n+8&63)}},{key:"pad",value:function(i){var f,e,r=i.byteLength,o=n.get_n_pad_bytes(r),c=(f=r,e=536870912,[Math.floor(f/e),f%e]).map(function(n,t){return t?8*n:n}),h=t(c,2),l=h[0],a=h[1],s=new Uint8Array(r+o+8),u;return s.set(new Uint8Array(i),0),u=new DataView(s.buffer),u.setUint8(r,128),u.setUint32(r+o,a,!0),u.setUint32(r+o+4,l,!0),s.buffer}},{key:"f",value:function(n,t,i,r){return 0<=n&&n<=15?t^i^r:16<=n&&n<=31?t&i|~t&r:32<=n&&n<=47?(t|~i)^r:48<=n&&n<=63?t&r|i&~r:64<=n&&n<=79?t^(i|~r):void 0}},{key:"K",value:function(n){return 0<=n&&n<=15?0:16<=n&&n<=31?1518500249:32<=n&&n<=47?1859775393:48<=n&&n<=63?2400959708:64<=n&&n<=79?2840853838:void 0}},{key:"KP",value:function(n){return 0<=n&&n<=15?1352829926:16<=n&&n<=31?1548603684:32<=n&&n<=47?1836072691:48<=n&&n<=63?2053994217:64<=n&&n<=79?0:void 0}},{key:"add_modulo32",value:function(){return 0|Array.from(arguments).reduce(function(n,t){return n+t},0)}},{key:"rol32",value:function(n,t){return n<<t|n>>>32-t}},{key:"hash",value:function(t){for(var y,g,w,nt,b=n.pad(t),tt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],it=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],rt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ut=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],k=b.byteLength/64,d=new Array(k).fill(void 0).map(function(n,t){return function(n){return new DataView(b,64*t,64).getUint32(4*n,!0)}}),i=[1732584193,4023233417,2562383102,271733878,3285377520],s=0;s<k;++s){for(var h=i[0],u=i[1],f=i[2],e=i[3],o=i[4],p=h,c=u,l=f,a=e,v=o,r=0;r<80;++r)y=n.add_modulo32(n.rol32(n.add_modulo32(h,n.f(r,u,f,e),d[s](tt[r]),n.K(r)),rt[r]),o),h=o,o=e,e=n.rol32(f,10),f=u,u=y,y=n.add_modulo32(n.rol32(n.add_modulo32(p,n.f(79-r,c,l,a),d[s](it[r]),n.KP(r)),ut[r]),v),p=v,v=a,a=n.rol32(l,10),l=c,c=y;g=n.add_modulo32(i[1],f,a);i[1]=n.add_modulo32(i[2],e,v);i[2]=n.add_modulo32(i[3],o,p);i[3]=n.add_modulo32(i[4],h,c);i[4]=n.add_modulo32(i[0],u,l);i[0]=g}return w=new ArrayBuffer(20),nt=new DataView(w),i.forEach(function(n,t){return nt.setUint32(4*t,n,!0)}),w}}]),n}();n.exports={RIPEMD160:r}},function(n){n.exports=JSON.parse('{"version":"eosio::abi/1.1","structs":[{"name":"extensions_entry","base":"","fields":[{"name":"tag","type":"uint16"},{"name":"value","type":"bytes"}]},{"name":"type_def","base":"","fields":[{"name":"new_type_name","type":"string"},{"name":"type","type":"string"}]},{"name":"field_def","base":"","fields":[{"name":"name","type":"string"},{"name":"type","type":"string"}]},{"name":"struct_def","base":"","fields":[{"name":"name","type":"string"},{"name":"base","type":"string"},{"name":"fields","type":"field_def[]"}]},{"name":"action_def","base":"","fields":[{"name":"name","type":"name"},{"name":"type","type":"string"},{"name":"ricardian_contract","type":"string"}]},{"name":"table_def","base":"","fields":[{"name":"name","type":"name"},{"name":"index_type","type":"string"},{"name":"key_names","type":"string[]"},{"name":"key_types","type":"string[]"},{"name":"type","type":"string"}]},{"name":"clause_pair","base":"","fields":[{"name":"id","type":"string"},{"name":"body","type":"string"}]},{"name":"error_message","base":"","fields":[{"name":"error_code","type":"uint64"},{"name":"error_msg","type":"string"}]},{"name":"variant_def","base":"","fields":[{"name":"name","type":"string"},{"name":"types","type":"string[]"}]},{"name":"abi_def","base":"","fields":[{"name":"version","type":"string"},{"name":"types","type":"type_def[]"},{"name":"structs","type":"struct_def[]"},{"name":"actions","type":"action_def[]"},{"name":"tables","type":"table_def[]"},{"name":"ricardian_clauses","type":"clause_pair[]"},{"name":"error_messages","type":"error_message[]"},{"name":"abi_extensions","type":"extensions_entry[]"},{"name":"variants","type":"variant_def[]$"}]}]}')},function(n){n.exports=JSON.parse('{"version":"eosio::abi/1.0","types":[{"new_type_name":"account_name","type":"name"},{"new_type_name":"action_name","type":"name"},{"new_type_name":"permission_name","type":"name"}],"structs":[{"name":"permission_level","base":"","fields":[{"name":"actor","type":"account_name"},{"name":"permission","type":"permission_name"}]},{"name":"action","base":"","fields":[{"name":"account","type":"account_name"},{"name":"name","type":"action_name"},{"name":"authorization","type":"permission_level[]"},{"name":"data","type":"bytes"}]},{"name":"extension","base":"","fields":[{"name":"type","type":"uint16"},{"name":"data","type":"bytes"}]},{"name":"transaction_header","base":"","fields":[{"name":"expiration","type":"time_point_sec"},{"name":"ref_block_num","type":"uint16"},{"name":"ref_block_prefix","type":"uint32"},{"name":"max_net_usage_words","type":"varuint32"},{"name":"max_cpu_usage_ms","type":"uint8"},{"name":"delay_sec","type":"varuint32"}]},{"name":"transaction","base":"transaction_header","fields":[{"name":"context_free_actions","type":"action[]"},{"name":"actions","type":"action[]"},{"name":"transaction_extensions","type":"extension[]"}]}]}')},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(n,t,i){"use strict";(function(n){function h(n){var r,u,f="",i,t;try{for(i=s(n),t=i.next();!t.done;t=i.next())f+=("00"+t.value.toString(16)).slice(-2)}catch(n){r={error:n}}finally{try{t&&!t.done&&(u=i.return)&&u.call(i)}finally{if(r)throw r.error;}}return f}var r=this&&this.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},u=this&&this.__generator||function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},s=this&&this.__values||function(n){var t="function"==typeof Symbol&&n[Symbol.iterator],i=0;return t?t.call(n):{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}}},f,e,o;Object.defineProperty(t,"__esModule",{value:!0});f=i(0);e=i(2);o=function(){function t(t,i){void 0===i&&(i={});this.endpoint=t;this.fetchBuiltin=i.fetch?i.fetch:n.fetch}return t.prototype.fetch=function(n,t){return r(this,void 0,void 0,function(){var r,i,f;return u(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,this.fetchBuiltin(this.endpoint+n,{body:JSON.stringify(t),method:"POST"})];case 1:return[4,(r=u.sent()).json()];case 2:if((i=u.sent()).processed&&i.processed.except)throw new e.RpcError(i);return[3,4];case 3:throw(f=u.sent()).isFetchError=!0,f;case 4:if(!r.ok)throw new e.RpcError(i);return[2,i]}})})},t.prototype.get_abi=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_abi",{account_name:n})];case 1:return[2,t.sent()]}})})},t.prototype.get_account=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_account",{account_name:n})];case 1:return[2,t.sent()]}})})},t.prototype.get_block_header_state=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_block_header_state",{block_num_or_id:n})];case 1:return[2,t.sent()]}})})},t.prototype.get_block=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_block",{block_num_or_id:n})];case 1:return[2,t.sent()]}})})},t.prototype.get_code=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_code",{account_name:n})];case 1:return[2,t.sent()]}})})},t.prototype.get_currency_balance=function(n,t,i){return void 0===i&&(i=null),r(this,void 0,void 0,function(){return u(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_currency_balance",{code:n,account:t,symbol:i})];case 1:return[2,r.sent()]}})})},t.prototype.get_currency_stats=function(n,t){return r(this,void 0,void 0,function(){return u(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_currency_stats",{code:n,symbol:t})];case 1:return[2,i.sent()]}})})},t.prototype.get_info=function(){return r(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_info",{})];case 1:return[2,n.sent()]}})})},t.prototype.get_producer_schedule=function(){return r(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_producer_schedule",{})];case 1:return[2,n.sent()]}})})},t.prototype.get_producers=function(n,t,i){return void 0===n&&(n=!0),void 0===t&&(t=""),void 0===i&&(i=50),r(this,void 0,void 0,function(){return u(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_producers",{json:n,lower_bound:t,limit:i})];case 1:return[2,r.sent()]}})})},t.prototype.get_raw_code_and_abi=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_raw_code_and_abi",{account_name:n})];case 1:return[2,t.sent()]}})})},t.prototype.getRawAbi=function(n){return r(this,void 0,void 0,function(){var t,i;return u(this,function(r){switch(r.label){case 0:return[4,this.get_raw_code_and_abi(n)];case 1:return t=r.sent(),i=f.base64ToBinary(t.abi),[2,{accountName:t.account_name,abi:i}]}})})},t.prototype.get_table_rows=function(n){var t=n.json,a=void 0===t||t,v=n.code,y=n.scope,p=n.table,i=n.table_key,w=void 0===i?"":i,f=n.lower_bound,b=void 0===f?"":f,e=n.upper_bound,k=void 0===e?"":e,o=n.index_position,d=void 0===o?1:o,s=n.key_type,g=void 0===s?"":s,h=n.limit,nt=void 0===h?10:h,c=n.reverse,tt=void 0!==c&&c,l=n.show_payer,it=void 0!==l&&l;return r(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_table_rows",{json:a,code:v,scope:y,table:p,table_key:w,lower_bound:b,upper_bound:k,index_position:d,key_type:g,limit:nt,reverse:tt,show_payer:it})];case 1:return[2,n.sent()]}})})},t.prototype.get_table_by_scope=function(n){var e=n.code,o=n.table,t=n.lower_bound,s=void 0===t?"":t,i=n.upper_bound,h=void 0===i?"":i,f=n.limit,c=void 0===f?10:f;return r(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_table_by_scope",{code:e,table:o,lower_bound:s,upper_bound:h,limit:c})];case 1:return[2,n.sent()]}})})},t.prototype.getRequiredKeys=function(n){return r(this,void 0,void 0,function(){var t;return u(this,function(i){switch(i.label){case 0:return t=f.convertLegacyPublicKeys,[4,this.fetch("/v1/chain/get_required_keys",{transaction:n.transaction,available_keys:n.availableKeys})];case 1:return[2,t.apply(void 0,[i.sent().required_keys])]}})})},t.prototype.push_transaction=function(n){var t=n.signatures,i=n.serializedTransaction;return r(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/push_transaction",{signatures:t,compression:0,packed_context_free_data:"",packed_trx:h(i)})];case 1:return[2,n.sent()]}})})},t.prototype.db_size_get=function(){return r(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/db_size/get",{})];case 1:return[2,n.sent()]}})})},t.prototype.history_get_actions=function(n,t,i){return void 0===t&&(t=null),void 0===i&&(i=null),r(this,void 0,void 0,function(){return u(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/history/get_actions",{account_name:n,pos:t,offset:i})];case 1:return[2,r.sent()]}})})},t.prototype.history_get_transaction=function(n,t){return void 0===t&&(t=null),r(this,void 0,void 0,function(){return u(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/history/get_transaction",{id:n,block_num_hint:t})];case 1:return[2,i.sent()]}})})},t.prototype.history_get_key_accounts=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/history/get_key_accounts",{public_key:n})];case 1:return[2,t.sent()]}})})},t.prototype.history_get_controlled_accounts=function(n){return r(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/history/get_controlled_accounts",{controlling_account:n})];case 1:return[2,t.sent()]}})})},t}();t.JsonRpc=o}).call(this,i(11))},function(n){var t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"==typeof window&&(t=window)}n.exports=t},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(n,t){"use strict";var i=this&&this.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){var t;n.done?u(n.value):(t=n.value,t instanceof i?t:new i(function(n){n(t)})).then(o,s)}e((r=r.apply(n,t||[])).next())})},r=this&&this.__generator||function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},u;Object.defineProperty(t,"__esModule",{value:!0});u=function(){function n(n){void 0===n&&(n="http://localhost:3000");this.waxSigningURL=n;this.timeout=function(){return new Promise(function(n,t){var i=setTimeout(function(){clearTimeout(i);t(new Error("Timeout"))},2e3)})};this.openEventSource=this.openEventSource.bind(this);this.onceEvent=this.onceEvent.bind(this)}return n.prototype.openEventSource=function(n,t,u){return i(this,void 0,void 0,function(){var f,e,o,s,h=this;return r(this,function(c){switch(c.label){case 0:return u?(e=u,[3,3]):[3,1];case 1:return[4,window.open(n,"WaxPopup","height=800,width=600")];case 2:e=c.sent();c.label=3;case 3:if(!(f=e))throw new Error("Unable to open a popup window");return void 0===t?[2,f]:(o=function(n){return i(h,void 0,void 0,function(){return r(this,function(){return"READY"===n.data.type&&f.postMessage(t,this.waxSigningURL),[2]})})},s=this.onceEvent(f,this.waxSigningURL,o),[4,Promise.race([s,this.timeout()]).catch(function(n){if("Timeout"!==n.message)throw n;f.postMessage(t,h.waxSigningURL)})]);case 4:return c.sent(),[2,f]}})})},n.prototype.onceEvent=function(n,t,u){return i(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(f,e){window.addEventListener("message",function o(s){return i(this,void 0,void 0,function(){var i,h;return r(this,function(r){switch(r.label){case 0:if(s.origin!==t)return[2];if(s.source!==n)return[2];if("object"!=typeof s.data)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u(s)];case 2:return i=r.sent(),f(i),[3,4];case 3:return h=r.sent(),e(h),[3,4];case 4:return window.removeEventListener("message",o,!1),[2]}})})},!1)})]})})},n}();t.WaxEventSource=u}])